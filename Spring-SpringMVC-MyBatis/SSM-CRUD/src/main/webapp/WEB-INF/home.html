<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>home</title>
    <!--    @{/static/js/jquery-1.7.2.js} 最前面要加上/ 符号 themeleaf 解析时会加上程序的根-->
    <script th:src="@{/static/js/jquery_2.1.1_jquery.js}"></script>
    <script th:src="@{/static/js/vue.js}"></script>
    <script th:src="@{/static/js/axios.min.js}"></script>

    <!-- 最新版本的 Bootstrap 核心 CSS 文件 -->
    <link rel="stylesheet" th:href="@{/static/css/bootstrap.min.css}"
          integrity="sha384-HSMxcRTRxnN+Bdg0JdbxYKrThecOKuH5zCYotlSAcp1+c8xmyTe9GYg1l9a69psu" crossorigin="anonymous">

    <!-- 最新的 Bootstrap 核心 JavaScript 文件 -->
    <script th:src="@{/static/js/bootstrap.min.js}"
            integrity="sha384-aJ21OjlMXNL5UyIl/XNwTMqvzeRMZH2w8c5cRVpzpU8Y5bApTppSuUkhZXN0VxHd"
            crossorigin="anonymous"></script>

    <!--Bootstrap's JavaScript requires jQuery version 1.9.1 or higher, but lower than version 4-->
</head>
<body>

<div id="dataTable">
    <div class="container">
        <!--        标题-->
        <div class="row">
            <div class="col-md-12">
                <h1>SSM - CRUD</h1>
            </div>
        </div>
        <!--        按钮-->
        <div class="row">
            <div class="col-md-4 col-md-offset-10">
                <button class="btn btn-primary">新 增</button>
                <button class="btn btn-danger">删 除</button>
            </div>
        </div>
        <!--        数据-->
        <div class="row">
            <div class="col-md-12">
                <!--"eid": 1, "empName": "MARK", "age": 12, "email": "123@QQ.COM", "sex": "男", "did": 1 -->
                <table class="table table-hover">
                    <thead>
                    <tr>
                        <th>#</th>
                        <th>员工ID</th>
                        <th>员工姓名</th>
                        <th>年 龄</th>
                        <th>邮 箱</th>
                        <th>性 别</th>
                        <th>所属部门</th>
                        <th>操 作</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr v-for="(item,index) in emps_info.list">
                        <th>#</th>
                        <th>{{item.eid}}</th>
                        <th>{{item.empName}}</th>
                        <th>{{item.age}}</th>
                        <th>{{item.email}}</th>
                        <th>{{item.sex}}</th>
                        <th>{{item.did}}</th>
                        <th>
                            <button class="btn btn-primary btn-sm">
                                <span class="glyphicon glyphicon-pencil" aria-hidden="true"></span>
                                编 辑
                            </button>
                            <button class="btn btn-danger btn-sm">
                                <span class="glyphicon glyphicon-trash" aria-hidden="true"></span>
                                删 除
                            </button>
                        </th>
                    </tr>
                    </tbody>
                </table>
            </div>
        </div>
        <!--        分页信息-->
        <div class="row">
            <!--文字-->
            <div class="col-md-6">
                当前页：{{emps_info.pageNum}} | 总页数：{{emps_info.pages}} | 总记录数：{{emps_info.total}}
            </div>
            <div class="col-md-6">
                <!--分页条-->
                <nav aria-label="Page navigation">
                    <ul class="pagination">
                        <li v-if="!emps_info.isFirstPage">
                            <a @click="getEmpsByPages(1)">首 页</a>
                        </li>
                        <li v-if="!emps_info.isFirstPage">
                            <a @click="getEmpsByPages(emps_info.pageNum-1)" aria-label="Previous">
                                <span aria-hidden="true">&laquo;</span>
                            </a>
                        </li>
                        <li v-for="(item,index) in emps_info.navigatepageNums">
                            <a @click="getEmpsByPages(item)">{{item}}</a>
                        </li>
                        <li v-if="!emps_info.isLastPage">
                            <a @click="getEmpsByPages(emps_info.pageNum+1)" aria-label="Next">
                                <span aria-hidden="true">&raquo;</span>
                            </a>
                        </li>
                        <li v-if="!emps_info.isLastPage">
                            <a @click="getEmpsByPages(emps_info.pages)">末 页</a>
                        </li>
                    </ul>
                </nav>
            </div>
        </div>
    </div>
</div>
</body>
<script th:inline="javascript">
    window.onload = function () {
        var vue = new Vue({
            "el": "#dataTable",
            data: {
                emps_info: null,
            },
            methods: {
                //在 @click 绑定方法的时候需要传入某个参数，同时又需要 event 时，可以通过 $event 传入事件。
                getEmpsByPages: function (pages) {
                    axios({
                        method: "GET",
                        url: [[${#request.getServletContext().getContextPath()}]] + "/home/findEmployeesByPageNums/" + pages,
                    })
                        .then(function (value) {
                            vue.emps_info = value.data
                        })
                        .catch(function (reason) {
                            console.log(reason);
                        });
                }
            },
            /*数据装载创建之后*/
            beforeMount: function () {
                this.getEmpsByPages(1);
            },
        });
    }
</script>
</html>